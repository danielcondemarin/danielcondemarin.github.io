<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Alexa Go Local! · d' dev panda ヽ(￣(ｴ)￣)ﾉ</title><meta name="description" content="Alexa Go Local! - Daniel Conde"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://www.devpanda.me/atom.xml" title="d' dev panda ヽ(￣(ｴ)￣)ﾉ"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/danielcondemarin" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Alexa Go Local!</h1><div class="post-info">May 26, 2018</div><div class="post-content"><p><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1527349668/AlexaGoLocal_xip103.png" alt="Alexa Go Local"></p>
<p>In the last few days, I’ve been exploring the world of Alexa Development. One of the challenges I’ve found, is that it wasn’t immediately obvious how to run and test your skill locally.</p>
<p>In this post, I’ll show you how to spin up a skill on localhost, and test it from the alexa developer portal. Ah! you probably already guessed from the title, but we’ll be using Golang today!</p>
<p>First, you need to setup your local skill server, think of it as a Lambda function you’ll host on your machine, therefore much easier to test. Luckily there is a great <a href="https://github.com/mikeflynn/go-alexa/tree/master/skillserver" target="_blank" rel="noopener">go pkg</a> out there already for this.</p>
<p>Let’s create our project and call it <em>Greeter</em>, make sure you replace <em>github.com/danielcondemarin</em> with your own namespace!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd $GOPATH/src/github.com/danielcondemarin/</span><br><span class="line">mkdir greeter &amp;&amp; cd &quot;$_&quot;</span><br><span class="line">touch main.go</span><br></pre></td></tr></table></figure>
<p>Now <em>go get</em> the skill server pkg:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/mikeflynn/go-alexa/skillserver</span><br></pre></td></tr></table></figure>
<p>In your favourite editor, change <em>main.go</em> to:</p>
<script src="//gist.github.com/626c7bde6c5c7c558763e95b2e7b19df.js"></script>
<p>Now head onto the <a href="https://developer.amazon.com/alexa" target="_blank" rel="noopener">developer portal</a> and create the skill:</p>
<p><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1527344795/create_skill_1_uop6tn.png" alt="Create Skill Step 1"></p>
<p><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1527344796/create_skill_2_avh9y0.png" alt="Create Skill Step 2"></p>
<p>After creating the skill, take a step back, copy the Skill ID on the main dashboard and set <strong>AppID</strong> in <strong>main.go</strong>.</p>
<p>You can now build the go skill server, and run it. By default will be hosted on <a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go build *.go</span><br><span class="line">./main</span><br></pre></td></tr></table></figure>
<p>Next, set an invocation name, just <em>greeter</em> will do. We will also need an <em>intent</em> and <em>intent slot</em> for the person name we want to greet!</p>
<p><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1527345367/create_skill_4_vqzzfl.png" alt="Skill Intent"></p>
<p>Notice the name’s slotType is already provided by Amazon, <strong>AMAZON.GB_FIRST_NAME</strong>. You will also want to set the slot required to fulfill the intent, to do that just click on the slot and enable the first toggle. Provide a prompt for the user to fill the slot too. </p>
<p>Next up, the Skill Endpoint, but before we configure that, go and download <a href="https://ngrok.com/download" target="_blank" rel="noopener">ngrok</a>. If you don’t know what ngrok is, it’s basically a way for you to expose on the public internet a local port or service in your machine.</p>
<p>Run ngrok and set it to forward to port 3000 over http:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./ngrok http 3000</span><br></pre></td></tr></table></figure>
<p>Copy the HTTPS URL, not HTTP! as Amazon requires a secure connection, go to the developer portal and on the Endpoint section select an HTTPS endpoint and paste the ngrok URL plus the path <strong>/echo/greeter</strong> (Mine was <a href="https://aa60ae80.ngrok.io/echo/greeter" target="_blank" rel="noopener">https://aa60ae80.ngrok.io/echo/greeter</a>). Make sure you select <em>“My development endpoint is a subdomain of a domain that has a wildcard certificate …”</em>.</p>
<p>Click Save Model, Build Model, and we are good to test! </p>
<p>Here is a screenshot with a few utterances I tried:</p>
<p><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1527346120/create_skill_5_uqulio.png" alt="utterances"></p>
<p>That’s the end of the blog post, hope you’ve enjoyed it and feel free to comment below if you have any questions!</p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/06/10/Using-Alexa-to-trigger-builds-in-TeamCity/" class="prev">PREV</a><a href="/2018/02/16/Simple-Angular-and-React-Hybrid-App/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2018 <a href="https://www.devpanda.me">Daniel Conde</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>