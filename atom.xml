<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>d&#39; dev panda ヽ(￣(ｴ)￣)ﾉ</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.devpanda.me/"/>
  <updated>2017-11-05T22:00:37.000Z</updated>
  <id>https://www.devpanda.me/</id>
  
  <author>
    <name>Daniel Conde</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>AWS CodePipeline - Integrating with TeamCity</title>
    <link href="https://www.devpanda.me/2017/11/05/AWS-CodePipeline-Integrating-with-TeamCity/"/>
    <id>https://www.devpanda.me/2017/11/05/AWS-CodePipeline-Integrating-with-TeamCity/</id>
    <published>2017-11-05T22:00:37.000Z</published>
    <updated>2017-11-05T22:00:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>AWS CodePipeline is an excellent tool for orchestrating your deployments in the cloud. It provides out of the box integration with  CI Providers such as CodeBuild, Jenkins and Solano CI. Other providers can be configured as well, like TeamCity, and that’s the aim of this post.</p>
<p>In order to understand the extensibility point in CodePipeline that allows to plugin a custom action like a TeamCity Build, read <a href="http://docs.aws.amazon.com/codepipeline/latest/userguide/actions-create-custom-action.html" target="_blank" rel="external">http://docs.aws.amazon.com/codepipeline/latest/userguide/actions-create-custom-action.html</a> which explains in depth custom action types in CodePipeline.</p>
<p>We will be setting up a deployment pipeline to automate releases of a simple nodejs app hosted in GitHub. To provision the Pipeline, we will use CloudFormation, which means you can provision it in an automated fashion. </p>
<p>So, let’s start by creating our project folder, let’s call it <code>node-app-devops</code>. Next, create a directory inside the project called <code>templates</code>, which is where your cloud formation template will be, let’s name it <code>deployment-pipeline.yaml</code>.</p>
<p>Open <code>deployment-pipeline.yaml</code> in an editor of your preference and let’s start by adding a <strong>Description</strong> to your template, and the <strong>Parameters</strong>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">Description: &gt;</div><div class="line">    This template will provision the  CodePipeline for the App.</div><div class="line">    (Pipeline) GitHub -&gt; TeamCity</div><div class="line"></div><div class="line">Parameters:</div><div class="line">   </div><div class="line">    GitHubOwner:</div><div class="line">        Description: Repository Owner</div><div class="line">        Type: String</div><div class="line">    </div><div class="line">    GitHubRepo:</div><div class="line">        Description: Repository Name</div><div class="line">        Type: String</div><div class="line">   </div><div class="line">    GitHubBranch:</div><div class="line">        Description: Repository Branch</div><div class="line">        Type: String</div><div class="line">   </div><div class="line">    GitHubOAuthToken:</div><div class="line">        Description: Access Token Generated via GitHub (https://github.com/settings/tokens)</div><div class="line">        Type: String</div><div class="line">   </div><div class="line">    TeamCityServerUrl:</div><div class="line">        Description: Url for TeamCity. Expected URL format, http[s]://host[:port]</div><div class="line">        Type: String</div><div class="line">   </div><div class="line">    TeamCityBuildId:</div><div class="line">        Description: Build Id for TeamCity Project</div><div class="line">        Type: String</div><div class="line">   </div><div class="line">    TeamCityActionId:</div><div class="line">        Description: Action Id for Codepipeline integration with TeamCity</div><div class="line">        Type: String</div></pre></td></tr></table></figure>
<p><code>GitHubOwner</code> would be simply your GitHub username, <code>GitHubRepo</code> the name of the repository and <code>GitHubBranch</code> is the branch where CodePipeline will fetch from. <code>GitHubOAuthToken</code> can be created if you don’t have one already, by going to <a href="https://github.com/settings/tokens" target="_blank" rel="external">https://github.com/settings/tokens</a>.</p>
<p>So far, it should be looking like this:</p>
<p><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1509871274/AWS-CodePipeline-Integrating-with-TeamCity/description_and_parameters.png" alt="Description And Parameters"></p>
<p>Next, let’s work on the <code>Resources</code> section, starting with the IAM Role used by the Pipeline. The role will provide access to an S3 Bucket, which will store the artifacts.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">Resources:</div><div class="line">   </div><div class="line">    CodePipelineServiceRole:</div><div class="line">        Type: AWS::IAM::Role</div><div class="line">        Properties:</div><div class="line">            RoleName: !Sub &apos;cpsr-$&#123;AWS::StackName&#125;&apos;</div><div class="line">            Path: /</div><div class="line">            AssumeRolePolicyDocument: </div><div class="line">                Statement:</div><div class="line">                    -</div><div class="line">                        Effect: Allow</div><div class="line">                        Principal:</div><div class="line">                            Service:</div><div class="line">                                - codepipeline.amazonaws.com</div><div class="line">                        Action:</div><div class="line">                            - sts:AssumeRole</div><div class="line">            Policies:</div><div class="line">                - </div><div class="line">                    PolicyName: !Sub &apos;cpsrp-$&#123;AWS::StackName&#125;&apos;</div><div class="line">                    PolicyDocument:</div><div class="line">                        Statement:</div><div class="line">                            - Resource:</div><div class="line">                                - !Sub &apos;arn:aws:s3:::$&#123;ArtifactBucket&#125;/*&apos;</div><div class="line">                              Effect: Allow</div><div class="line">                              Action: </div><div class="line">                                - s3:PutObject</div><div class="line">                                - s3:GetObject</div><div class="line">    </div><div class="line">    ArtifactBucket:</div><div class="line">        Type: AWS::S3::Bucket</div><div class="line">        DeletionPolicy: Retain</div></pre></td></tr></table></figure>
<p>Note, how in <strong>RoleName</strong> I’m using <code>cpsr-${AWS::StackName}</code>, as convention <strong>cpsr</strong> stands for the initials of the Resource being provisioned, and we append the Pseudo Parameter <code>AWS::StackName</code> to have a more unique name which can also be easily associated to the Stack.<br>In the <code>Policies</code> there will be one that provides the S3 access needed by the Pipeline.<code>ArtifactBucket</code> is simply the S3 bucket that will be used as intermediate storage between TeamCity and CodePipeline.</p>
<p>Next, let’s do the actual integration with TeamCity on our pipeline. For that, we need a <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-codepipeline-customactiontype.htm" target="_blank" rel="external">Custom Action Type</a>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">TeamCityBuildActionType:</div><div class="line">    Type: AWS::CodePipeline::CustomActionType</div><div class="line">    Properties:</div><div class="line">        Version: 1</div><div class="line">        Category: Build</div><div class="line">        Provider: TeamCity</div><div class="line">        Settings:</div><div class="line">            EntityUrlTemplate: &apos;&#123;Config:TeamCityServerURL&#125;/viewType.html?buildTypeId=&#123;Config:BuildConfigurationID&#125;&apos;</div><div class="line">            ExecutionUrlTemplate: &apos;&#123;Config:TeamCityServerURL&#125;/viewLog.html?buildId=&#123;ExternalExecutionId&#125;&amp;tab=buildResultsDiv&apos;</div><div class="line">        ConfigurationProperties:</div><div class="line">            - Name: TeamCityServerURL</div><div class="line">              Description: The expected URL format is http:[s]://host[:port]</div><div class="line">              Required: true</div><div class="line">              Key: true</div><div class="line">              Secret: false</div><div class="line">              Queryable: false</div><div class="line">              Type: String</div><div class="line">            - Name: BuildConfigurationID</div><div class="line">              Description: TeamCity configuration external Id</div><div class="line">              Required: true</div><div class="line">              Key: true</div><div class="line">              Secret: false</div><div class="line">              Queryable: false</div><div class="line">              Type: String</div><div class="line">            - Name: ActionID</div><div class="line">              Description: &gt; </div><div class="line">                  Must be unique, match the corresponding field in TeamCity build trigger settings and satisfy regular expression pattern: [a-zA-Z0-9_-]+] and have length &lt;= 20</div><div class="line">              Required: true</div><div class="line">              Key: true</div><div class="line">              Secret: false</div><div class="line">              Queryable: true</div><div class="line">              Type: String</div><div class="line">        InputArtifactDetails:</div><div class="line">            MaximumCount: 5</div><div class="line">            MinimumCount: 0</div><div class="line">        OutputArtifactDetails:</div><div class="line">            MaximumCount: 5</div><div class="line">            MinimumCount: 0</div></pre></td></tr></table></figure>
<p>Note that ActionID is the value that will link TeamCity together with CodePipeline, but more on that later.</p>
<p>Lastly, let’s bring all the pieces together and implement the actual CodePipeline:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Pipeline:</div><div class="line">    Type: AWS::CodePipeline::Pipeline</div><div class="line">    Properties:</div><div class="line">        RoleArn: !GetAtt CodePipelineServiceRole.Arn</div><div class="line">        ArtifactStore:</div><div class="line">            Type: S3</div><div class="line">            Location: !Ref ArtifactBucket</div><div class="line">        Stages:</div><div class="line">            - Name: Source</div><div class="line">              Actions:</div><div class="line">                  - Name: GitHubSource</div><div class="line">                    ActionTypeId: </div><div class="line">                        Category: Source</div><div class="line">                        Owner: ThirdParty</div><div class="line">                        Version: 1</div><div class="line">                        Provider: GitHub</div><div class="line">                    Configuration:</div><div class="line">                        Owner: !Ref GitHubOwner</div><div class="line">                        Repo: !Ref GitHubRepo</div><div class="line">                        Branch: !Ref GitHubBranch</div><div class="line">                        OAuthToken: !Ref GitHubOAuthToken</div><div class="line">                    OutputArtifacts:</div><div class="line">                        - Name: AppRepo</div><div class="line">            - Name: Build</div><div class="line">              Actions:</div><div class="line">                  - Name: TeamCityBuild</div><div class="line">                    ActionTypeId:</div><div class="line">                        Category: Build</div><div class="line">                        Owner: Custom</div><div class="line">                        Version: 1</div><div class="line">                        Provider: TeamCity</div><div class="line">                    Configuration:</div><div class="line">                        TeamCityServerURL: !Ref TeamCityServerUrl</div><div class="line">                        BuildConfigurationID: !Ref TeamCityBuildId</div><div class="line">                        ActionID: !Ref TeamCityActionId</div><div class="line">                    InputArtifacts:</div><div class="line">                        - Name: AppRepo</div><div class="line">                    OutputArtifacts:</div><div class="line">                        - Name: BuildOutput</div></pre></td></tr></table></figure>
<p>I know what you’re thinking, there is a missing piece, which is the deployment stage right? :) Well the purpose of the post is to show how to integrate with TeamCity your CodePipeline, so we’ll keep it simple, and maybe have another post later on how to integrate with other services for deploying.</p>
<p>Let’s now create the BuildConfiguration in TeamCity for the app, but first, we need to install a plugin which will be responsible for pulling any build jobs provided by the Pipeline. The plugin can be found <a href="https://confluence.jetbrains.com/display/TW/AWS+CodePipeline+Plugin" target="_blank" rel="external">here</a>. If you’ve never installed a plugin before on TeamCity, just go to <strong>Administration &gt; Plugins List</strong> and click on <strong>Upload plugin zip</strong>. You can get the plugin zip from the link above. You might need to restart the TeamCity server after uploading the plugin. Should look this after installing it:</p>
<p><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1509908370/AWS-CodePipeline-Integrating-with-TeamCity/teamcityplugins.png" alt="TeamCity Plugins"></p>
<p>Note how I’ve got a plugin for better nodejs integration with TeamCity, that will come handy when we configure our build. You can find it <a href="https://github.com/jonnyzzz/TeamCity.Node" target="_blank" rel="external">here</a>, install it like you did for the previous one.</p>
<p>Create a new Project in TeamCity, and a build configuration, skip the VCS setup, since our repository will come from CodePipeline instead of a version control provider. I named my project <code>Demo App</code>, and the build configuration <code>DemoAppBuild</code>. First, we need to configure a Trigger, which will execute the build configuration whenever the Pipeline needs it to. If you’ve installed correctly the CodePipeline plugin for TeamCity, you should be able to configure the trigger like this:<br><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1509909920/AWS-CodePipeline-Integrating-with-TeamCity/codepipelinetrigger.png" alt="CodePipeline Trigger"><br>Use your own AWS Access Keys. Also, in ActionID just put anything meaningful, this will be the value that will tie together your build configuration with the Pipeline in AWS.</p>
<p>Now let’s configure the Build Steps. I have 5 build steps:</p>
<p><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1509910295/AWS-CodePipeline-Integrating-with-TeamCity/buildsteps.png" alt="Build Steps">.</p>
<p>Steps 1, 3 and 4 can be configured easily by using the jonnyzzz plugin mentioned above, so I won’t go in detail for these. Now, let’s have a look at step <code>2. Copy Repository To Working Directory</code>. This is a command line script which will pickup the repository dropped by CodePipeline and copy it to the build working directory:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line"># vars</div><div class="line">repo_input_zip=&quot;%codepipeline.artifact.input.folder%/AppRepo.zip&quot;</div><div class="line"></div><div class="line"># unzip repo to working directory</div><div class="line">unzip $repo_input_zip -d %teamcity.build.workingDir%</div></pre></td></tr></table></figure>
<p>The variable <code>%codepipeline.artifact.input.folder%</code> is automatically setup by the plugin, and points to the directory where the repository will be dropped.</p>
<p>Let’s have a look now at the last step: <code>5. Copy Repository To CodePipeline Output Directory</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line"># vars</div><div class="line">repo_output_zip=&quot;%codepipeline.artifact.output.folder%/BuildOutput.zip&quot;</div><div class="line"></div><div class="line"># zip &amp; copy repo to output directory for codepipeline</div><div class="line">zip -r $repo_output_zip %teamcity.build.workingDir%</div></pre></td></tr></table></figure>
<p>This step will basically copy the build artifact to the pickup directory for CodePipeline to copy from.</p>
<p>It is demo time now, so let’s go ahead now and launch our stack:</p>
<p><a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=AppPipeline&amp;templateURL=https://s3-eu-west-1.amazonaws.com/devpanda-bucket/node-app-devops/cf-templates/deployment-pipeline.yaml" target="_blank" rel="external"><img src="https://s3.amazonaws.com/cloudformation-examples/cloudformation-launch-stack.png" alt="Launch Stack"></a></p>
<p>After following the Launch Stack link, you should get a screen like this:</p>
<p><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1509914716/AWS-CodePipeline-Integrating-with-TeamCity/cf-launch-parameters.png" alt="Stack Launch"></p>
<p>Make sure you replace <code>GitHubOAuthToken</code> with your own and the <code>TeamCityServerUrl</code> as well. The app node-demo-app is hosted on my account <a href="https://github.com/danielcondemarin/node-demo-app" target="_blank" rel="external">here</a><br>You should have access to it with your token, if not, just fork it and use  your own username and repository. Now follow the Stack creation, and after completion it should look like:</p>
<p><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1509915058/AWS-CodePipeline-Integrating-with-TeamCity/stackcompleted.png" alt="Stack Created"></p>
<p>After the Stack is created, it will automatically trigger the CodePipeline which should all work as expected. </p>
<p><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1509915396/AWS-CodePipeline-Integrating-with-TeamCity/codepipelinesuccess.png" alt="Pipeline Success"></p>
<p>That is the end of this post, hope you enjoyed it, and is of good use in your devops toolbelt ;). All the sources for the demo can be found on the repo : <a href="https://github.com/danielcondemarin/node-app-devops" target="_blank" rel="external">https://github.com/danielcondemarin/node-app-devops</a>.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;AWS CodePipeline is an excellent tool for orchestrating your deployments in the cloud. It provides out of the box integration with  CI Pr
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>AWS Route53 - DNS Whitelisting using Geolocation Routing</title>
    <link href="https://www.devpanda.me/2017/10/07/DNS-Blacklist-of-locations-countries-using-AWS-Route53/"/>
    <id>https://www.devpanda.me/2017/10/07/DNS-Blacklist-of-locations-countries-using-AWS-Route53/</id>
    <published>2017-10-07T13:41:25.000Z</published>
    <updated>2017-10-15T14:16:03.000Z</updated>
    
    <content type="html"><![CDATA[<p>Assumptions:  Basic knowledge of AWS Route53</p>
<p>DNS can be a powerful tool, more so if you are using AWS Route53 as your provider.</p>
<p>In this post I will focus on how to use Route53’s <a href="http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-policy.html#routing-policy-geo" target="_blank" rel="external">Geolocation routing</a> as a whitelist / blacklist of users originating from around the world.</p>
<p>So, let’s assume you only want users from the United Kingdom to access your website. This could be because all your customer base and operations are UK based, or maybe your application was DDoS’ed from various countries around the world, and you want to make sure any DNS query issued from this malicious Origin / IP is null routed.</p>
<p>First, let’s go to Route53 and create our first record set :</p>
<p><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1507497187/nullrouteset.png" alt="Null Route"></p>
<p>Please note this will be our default route, which will resolve to the IP Address <a href="https://en.wikipedia.org/wiki/Null_route" target="_blank" rel="external">0.0.0.0</a>. So, whenever a user attempts to reach your website domain (i.e. mywebsite.somedomain.co.uk) Route53 will resolve that DNS Query to <code>0.0.0.0</code>, then your machine will attempt to reach the website via the IP 0.0.0.0 which obviously doesn’t exist and will fail.</p>
<p>Let’s setup now the record for users originating from the UK and assume our webserver will be hosted on a server with IP <code>54.12.12.12</code> :</p>
<p><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1507497187/ukrouteset.png" alt="UK Route"></p>
<p>That should be it, the A records just created along with the domain NS records should be listed in your website Hosted Zone like this:</p>
<p><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1507497187/hostedzone.png" alt="Hosted Zone"></p>
<p>But how do we test this is working correctly? It should be easy be using <code>dig</code> via your terminal. Just grab one of the nameservers for your domain, listed above, and run the following command :</p>
<p><code>./bin/dig/dig @your-nameserver mywebsite.somedomain.co.uk +client=45.63.111.158/24</code></p>
<p>Caveat : You will need a <a href="https://www.gsic.uva.es/~jnisigl/dig-edns-client-subnet.html" target="_blank" rel="external">patched version</a> of <code>dig</code> in order to use the <code>+client</code> option. This option allows you to tell the nameserver the user ip address, which then it uses to return an IP Address from your records, based on the estimated geolocation of the IP Address you passed. This mainly works thanks to the <a href="https://tools.ietf.org/html/rfc7871" target="_blank" rel="external">client subnet in DNS queries</a>. </p>
<p><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1507500087/usdnsquery.png" alt="DNS Query with American IP Address"></p>
<p>I used the IP Address <code>45.63.111.158</code> which is from an American DNS Server I’ve found here <a href="https://public-dns.info/" target="_blank" rel="external">https://public-dns.info/</a>. Make sure you look again for a different IP since this might change.</p>
<p>Now, for the UK:</p>
<p><img src="https://res.cloudinary.com/danielcondemarin/image/upload/v1507500087/ukdnsquery.png" alt="DNS Query with UK IP Address"></p>
<p>That’s about it really, hope you found it interesting and give some real use to it.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Assumptions:  Basic knowledge of AWS Route53&lt;/p&gt;
&lt;p&gt;DNS can be a powerful tool, more so if you are using AWS Route53 as your provider.&lt;/p
    
    </summary>
    
    
      <category term="AWS" scheme="https://www.devpanda.me/tags/AWS/"/>
    
      <category term="Route53" scheme="https://www.devpanda.me/tags/Route53/"/>
    
      <category term="Geolocation" scheme="https://www.devpanda.me/tags/Geolocation/"/>
    
      <category term="Client Subnet" scheme="https://www.devpanda.me/tags/Client-Subnet/"/>
    
      <category term="DNS Blacklist" scheme="https://www.devpanda.me/tags/DNS-Blacklist/"/>
    
  </entry>
  
  <entry>
    <title>SSH Public Key authentication to your Edison</title>
    <link href="https://www.devpanda.me/2017/06/25/SSH-Public-Key-authentication-to-your-Edison/"/>
    <id>https://www.devpanda.me/2017/06/25/SSH-Public-Key-authentication-to-your-Edison/</id>
    <published>2017-06-25T08:43:38.000Z</published>
    <updated>2017-10-15T14:16:38.000Z</updated>
    
    <content type="html"><![CDATA[<p>I believe the best developers are the laziest ones, those who <em>do more by doing less</em>. That includes not having to type in your password every time you want to login to your <strong>Intel Edison</strong>.</p>
<p>If you have worked with <strong>*nix</strong> systems, you might be familiar with SSH Public Key authentication. If you don’t know what that is, I strongly recommend having a read of this <a href="http://blakesmith.me/2010/02/08/understanding-public-key-private-key-concepts.html" target="_blank" rel="external">article</a>, it is by far one of the best explanations I’ve seen. </p>
<p>In a nutshell, we will be generating a private and a public key. Then we will copy ONLY the public key to the <strong>Edison</strong>. That way you will be able to login to the Edison automatically as long as you have the private key.</p>
<p>Let’s start, first open a terminal, then run the following commands:</p>
<ol>
<li><p>Generate private / public key pair via <a href="https://linux.die.net/man/1/ssh-keygen" target="_blank" rel="external">ssh-keygen</a>:</p>
<p> <code>ssh-keygen -t rsa</code></p>
<p> I named the key “<strong>edison_key</strong>“, but feel free to use your own name. When you’re prompted for the <strong>passphrase</strong> just press enter, to avoid creating one. It should all look like this:</p>
<p> <img src="/images/ssh-keygen.png" alt=""></p>
</li>
<li><p>Copy the public key (<strong>edison_key.pub</strong>) to your intel edison:</p>
<p> <code>cat /Users/daniel/.ssh/edison_key.pub | ssh root@192.168.0.10 &quot;mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt;  ~/.ssh/authorized_keys&quot;</code></p>
<p> Make sure you replace <em>/Users/daniel/.ssh/edison_key.pub</em> with your own path. Also, I’m assuming the Edison is accessible via <strong>192.168.0.10</strong> with SSH enabled.</p>
</li>
<li><p>That’s it! Let’s connect now:</p>
<p><code>ssh root@192.168.0.10 -i /Users/daniel/.ssh/edison_key</code></p>
<p><img src="/images/login-via-pub.png" alt=""></p>
</li>
</ol>
<p>Tip: If you want to avoid specifying the private key <em>… -i /Users/daniel/.ssh/edison_key</em>, just use the default name when generating the key on step <em>1</em>, which is id_rsa.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;I believe the best developers are the laziest ones, those who &lt;em&gt;do more by doing less&lt;/em&gt;. That includes not having to type in your pa
    
    </summary>
    
    
      <category term="Intel Edison" scheme="https://www.devpanda.me/tags/Intel-Edison/"/>
    
      <category term="SSH Public Key" scheme="https://www.devpanda.me/tags/SSH-Public-Key/"/>
    
  </entry>
  
</feed>
